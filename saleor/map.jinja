
{%- load_yaml as server_common %}
default:
  pkgs:
  - build-essential
  - python3
  - python3-dev
  - python3-pip
  - python-pip
  - python3-cffi
  - libcairo2
  - libpango-1.0-0
  - libpangocairo-1.0-0
  - libgdk-pixbuf2.0-0
  - libffi-dev
  - shared-mime-info
  - npm
  - nodejs
  - python-virtualenv
  - gettext
  dir:
    base: /srv/saleor
    scripts: /root/saleor/scripts
    logs: /var/log/saleor
  source:
    saleor:
      engine: git
      address: https://github.com/mirumee/saleor.git
      revision: demo/v2018.06.10
  app: {}
{%- endload %}

{% set server = salt['grains.filter_by'](server_common, merge=salt['pillar.get']('saleor:server')) %}
